{% extends "base.html" %}

{% block hero %}{% endblock %}

{% block content %}
<div class="card shadow-sm p-4">
  <h2 class="fw-bold mb-4">
    {% if destination %}‚úèÔ∏è Edit{% else %}‚ûï Add{% endif %} Destination
  </h2>

  <form method="post" class="form">
    {% csrf_token %}

    <!-- Destination Name -->
    <div class="mb-3">
      <label for="id_name" class="form-label fw-semibold">Destination Name</label>
      {{ form.name }}
    </div>

    <!-- Country Dropdown -->
    <div class="mb-3">
      <label for="id_location" class="form-label fw-semibold">Country</label>
      {{ form.location }}
    </div>

    <!-- Status Dropdown -->
    <div class="mb-3">
      <label for="id_status" class="form-label fw-semibold">Status</label>
      {{ form.status }}
    </div>

    <!-- Submit Buttons -->
    <div class="mt-4">
      <button type="submit" class="btn btn-primary">üíæ Save</button>
      <a href="{% url 'destination_list' %}" class="btn btn-outline-secondary">‚¨ÖÔ∏è Cancel</a>
    </div>
  </form>
</div>

<!-- JS Enhancement -->
<script>
document.addEventListener("DOMContentLoaded", function() {
  const countrySelect = document.getElementById("id_location");
  const nameInput = document.getElementById("id_name");

  // Enable "type to search" (default browser behavior)
  // and auto-fill destination name based on country selection
  if (countrySelect && nameInput) {
    countrySelect.addEventListener("change", function() {
      const selectedCountry = countrySelect.options[countrySelect.selectedIndex].text;
      // Auto-fill only if destination name is empty
      if (nameInput.value.trim() === "") {
        nameInput.value = selectedCountry;
      }
    });
  }
});
</script>
{% endblock %}
